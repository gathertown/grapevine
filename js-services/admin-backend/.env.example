# SSO Configuration for Popup/Iframe Integration
# ==============================================

# Feature flags to enable SSO (either enables SSO; popup preferred)
ENABLE_POPUP_SSO=false
ENABLE_IFRAME_SSO=false

# Grant TTL in seconds (30-300 seconds range, default: 60)
SSO_GRANT_TTL_SECONDS=60

# Access token TTL in seconds (300-3600 seconds range, default: 900)
SSO_ACCESS_TOKEN_TTL_SECONDS=900

# Refresh token TTL in seconds (3600-604800 seconds range, default: 86400)
SSO_REFRESH_TOKEN_TTL_SECONDS=86400

# Comma-separated list of allowed top-level (parent window) origins
# Example: https://app.gather.town,https://staging.gather.town
SSO_ALLOWED_TOP_LEVEL_ORIGINS=

# Comma-separated list of allowed frontend origins (where admin frontend is hosted)
# Either or both can be set; they are merged internally.
# Example: https://admin.grapevine.ai,https://app.grapevine.ai
SSO_ALLOWED_IFRAME_ORIGINS=
SSO_ALLOWED_POPUP_ORIGINS=

# JWT signing secret for SSO access tokens (falls back to JWT_SECRET if not set)
SSO_JWT_SECRET=

# JWT issuer for access tokens (default: grapevine-admin-backend)
SSO_JWT_ISSUER=grapevine-admin-backend

# JWT audience for access tokens (default: grapevine-admin-api)
SSO_JWT_AUDIENCE=grapevine-admin-api

# Existing JWT_SECRET (used as fallback for SSO_JWT_SECRET)
JWT_SECRET=

# Dev: allow http://localhost and http://127.0.0.1 origins (any port)
# WARNING: Avoid enabling in production except for temporary debugging.
SSO_ALLOW_HTTP_LOCALHOST=false
